# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type UserRole {
  id: Int!
  personID: Int!
  roleID: Int!
}

type ParticipantList {
  id: ID!
  personID: Int!
  eventID: Int!
  statusID: Int!
}

type Location {
  id: ID!
  address: String
  room: String
  isOffline: Boolean!

  """ссылка на мероприятие, если оно онлайн"""
  link: String
}

type Event {
  id: ID!
  name: String!

  """ссылка на обложку"""
  urlCover: String
  description: String
  isSBT: Boolean!
  creatorID: Int!

  """начало мероприятия"""
  startedAt: DateTime!

  """конец мероприятия"""
  finishedAt: DateTime!
  locationID: Int

  """ссылка на ipfs"""
  nftIpfsUrl: String!

  """количество зарегестрированных пользователей"""
  registeredParticipants: Int!
  typeID: Int!
  statusID: Int!

  """ссылка для подтверждения регестрации"""
  approveLink: String
  location: Location
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Person {
  id: ID!
  tgID: String!
  roles: [UserRole!]!
  ParticipantList: [ParticipantList!]!
  events: [Event!]!
}

"""статус мероприятия"""
type Status {
  id: ID!
  status: String!
}

"""тип мероприятия"""
type Type {
  id: Int!
  type: String!
}

"""роли людей"""
type Role {
  id: ID!
  name: String!
}

type Query {
  personByID(id: Int!): Person!
  personByTgID(tgID: String!): Person!
  statusCollection: [Status!]!
  statusByID(id: Int!): Status!
  typeCollection: [Type!]!
  typeByID(id: Int!): Type!
  roleCollection: [Role!]!
  roleByID(id: Int!): Role!
  locationCollection: [Location!]!
  locationByID(id: Int!): Location!

  """получение статуса участника на данном мероприятии"""
  status(input: CreateParticipantListInput!): String!

  """получение всех мероприятий"""
  eventCollection: [Event!]!

  """получение мероприятия по его id"""
  eventByID(id: Int!): Event!

  """получение мероприятий по телеграмм id создателя"""
  eventCollectionByTG(tgID: String!): [Event!]!

  """получение мероприятия по подтверждающей участие ссылке"""
  eventByLink(link: String!): Event!

  """получение всех мероприятий с данным именем"""
  eventCollectionByName(name: String!): [Event!]!
}

input CreateParticipantListInput {
  personID: Int!
  eventID: Int!
}

type Mutation {
  createPerson(walletAddress: String!, tgID: String!): Person!

  """создание новой локации"""
  createLocation(createLocationInput: CreateLocationInput!): Location!

  """регистрация человека на мероприятие"""
  register(createParticipantListInput: CreateParticipantListInput!): ParticipantList!

  """подтверждение участия участника в мероприятии"""
  approve(input: CreateParticipantListInput!): ParticipantList!

  """создание мероприятия"""
  createEvent(
    input: CreateEventInput!

    """телеграмм id создателя мероприятия"""
    tgID: String!
  ): Event!

  """добавление подтверждающей ссылки"""
  addApproveLink(eventID: Float!, approveLink: String!): Event!
}

input CreateLocationInput {
  address: String
  room: String
  isOffline: Boolean!
  link: String
}

input CreateEventInput {
  name: String!
  urlCover: String
  description: String
  isSBT: Boolean!
  startedAt: DateTime!
  finishedAt: DateTime!
  locationID: Int
  nftIpfsUrl: String!
  countOfRewardTokens: Int!
  typeID: Int = 1
  statusID: Int = 1
  approveLink: String
}